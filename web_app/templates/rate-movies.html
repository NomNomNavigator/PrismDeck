<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Rate Movies</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
            integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
            crossorigin="anonymous">
</head>
  <body style="background-image: url('/static/images/movie-background-collage.jpg');
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;">

    <nav class="navbar navbar-expand-lg navbar-dark bg-primary" >
      <a class="navbar-brand" href="#"><img src="{{url_for('static', filename="images/chewing_otter.jpeg")}}",width="50", height="50"> PrismDeck</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav">
           {% if user.is_authenticated %}
            <a class="nav-item nav-link" href="/prism-home">Home</a>
            <a class="nav-item nav-link active" href="/rate-movies">Rate Movies<span class="sr-only">(current)</span></a>
            <a class="nav-item nav-link" href="/prefer">Preferences</a>
            <a class="nav-item nav-link" href="/logout">Logout</a>
            {% else %}
            <a class="nav-item nav-link" href="/login">Login</a>
            <a class="nav-item nav-link" href="/sign-up">Signup</a>
            {% endif %}
          <!-- <a class="nav-item nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a> -->
        </div>
      </div>
    </nav>
     {% with messages = get_flashed_messages(with_categories=true) %}
       {% if messages %}
           {% for category, msg in messages %}
           {% if category == 'error' %}
           <div class="alert alert-danger alter-dismissable fade show" role="alert">
               {{msg}}
               <button type="button" class="close" data-dismiss="alert">
                   <span aria-hidden="true">&times;</span>
               </button>
           </div>
           {% else %}
   <div class="alert alert-success alter-dismissable fade show" role="alert">
               {{msg}}
               <button type="button" class="close" data-dismiss="alert">
                   <span aria-hidden="true">&times;</span>
               </button>
           </div>
           {% endif %}
           {% endfor %}
           {% endif %}
       {% endwith %}
     <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
       integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
       crossorigin="anonymous"></script>
       <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
       integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
       crossorigin="anonymous"></script>
       <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
       integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
       crossorigin="anonymous"></script>


<!--        <h1>RecAnime!!!</h1>-->
       <div class="container">
   <div class="col-md-12">
       {% block content %}
       {% endblock %}
   </div>
       </div>
       {% for x in content %}
           <p>{{x}}</p>
       {% endfor %}

    <form action="{{ url_for('rate_movies.rate_movie') }}" method="post">
      <div class="movie-container">
        {% for movie in movies %}
          <div class="movie_column">
            <div class="movie-tile">
              <div class="rating">
                <div>
                  <h5>{{ movie['title'] }}</h5>
                  <p>Year: {{ movie['year'] }} <br> Average Rating: {{ movie['avg_rate'] }} <br> Reviewers: {{ movie['rates'] }}</p>
                  <input type="hidden" name="movie_ids[]" value="{{ movie['id'] }}">
                  <input value="5" name="rating_{{ movie['id'] }}" id="star5_{{ movie['id'] }}" type="radio">
                  <label for="star5_{{ movie['id'] }}"></label>
                  <input value="4" name="rating_{{ movie['id'] }}" id="star4_{{ movie['id'] }}" type="radio">
                  <label for="star4_{{ movie['id'] }}"></label>
                  <input value="3" name="rating_{{ movie['id'] }}" id="star3_{{ movie['id'] }}" type="radio">
                  <label for="star3_{{ movie['id'] }}"></label>
                  <input value="2" name="rating_{{ movie['id'] }}" id="star2_{{ movie['id'] }}" type="radio">
                  <label for="star2_{{ movie['id'] }}"></label>
                  <input value="1" name="rating_{{ movie['id'] }}" id="star1_{{ movie['id'] }}" type="radio">
                  <label for="star1_{{ movie['id'] }}"></label>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
      <div class="submit-container">
        <input type="submit" value="Rate More" name="next">
        <input type="submit" value="Finish" name="finish">
      </div>
    </form>
  </body>
</html>